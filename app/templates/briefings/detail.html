{% extends "layouts/base.html" %}

{% block title %}{{ briefing.title or briefing.type_label }} - NR2 Network{% endblock %}
{% block og_title %}{{ briefing.title or briefing.type_label }}{% endblock %}
{% block og_desc %}{{ briefing.content[:150] | replace('\n', ' ') }}{% endblock %}

{% block extra_css %}
<style>
    .briefing-content {
        white-space: pre-wrap;
        word-break: keep-all;
        line-height: 1.8;
        font-size: 0.95rem;
    }
    .share-btn {
        transition: all 0.2s;
    }
    .share-btn:hover {
        transform: scale(1.05);
    }
</style>
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 py-8">
    <!-- ë’¤ë¡œê°€ê¸° -->
    <a href="{{ url_for('briefings.index') }}" class="inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-6">
        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        ë¸Œë¦¬í•‘ ëª©ë¡
    </a>

    <!-- ë¸Œë¦¬í•‘ ì¹´ë“œ -->
    <div class="bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden">
        <!-- í—¤ë” -->
        <div class="px-6 py-5 border-b border-gray-100" style="background: linear-gradient(135deg, {{ briefing.type_badge_color }}11, {{ briefing.type_badge_color }}05);">
            <div class="flex items-center gap-2 mb-3">
                <span class="text-xs px-3 py-1 rounded-full text-white font-semibold" style="background-color: {{ briefing.type_badge_color }}">
                    {{ briefing.type_label }}
                </span>
                <span class="text-xs text-gray-400">
                    {{ briefing.created_at.strftime('%Yë…„ %mì›” %dì¼ %H:%M') }}
                </span>
            </div>
            {% if briefing.title %}
            <h1 class="text-xl font-bold text-gray-900">{{ briefing.title }}</h1>
            {% endif %}
        </div>

        <!-- ë³¸ë¬¸ -->
        <div class="px-6 py-6">
            <div class="briefing-content text-gray-700">{{ briefing.content }}</div>
        </div>

        <!-- í•˜ë‹¨ -->
        <div class="px-6 py-4 bg-gray-50 border-t border-gray-100 flex items-center justify-between">
            <span class="text-xs text-gray-400">
                NR2 AI ìë™ ìƒì„± Â· {{ briefing.created_at.strftime('%Y.%m.%d %H:%M') }}
            </span>
            <div class="flex gap-2">
                <button onclick="copyBriefing()" class="share-btn px-3 py-1.5 text-xs bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300">
                    ğŸ“‹ ë³µì‚¬
                </button>
                <a href="https://t.me/share/url?url={{ request.url }}&text={{ (briefing.title or 'ë¸Œë¦¬í•‘') | urlencode }}"
                   target="_blank"
                   class="share-btn px-3 py-1.5 text-xs bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                    âœˆï¸ í…”ë ˆê·¸ë¨
                </a>
            </div>
        </div>
    </div>

    <!-- ì´ì „/ë‹¤ìŒ -->
    <div class="flex justify-between mt-6">
        {% set prev_b = prev_briefing %}
        {% set next_b = next_briefing %}
        {% if prev_b %}
        <a href="{{ url_for('briefings.detail', briefing_id=prev_b.id) }}"
           class="text-sm text-gray-500 hover:text-gray-700">
            â† ì´ì „ ë¸Œë¦¬í•‘
        </a>
        {% else %}
        <span></span>
        {% endif %}
        {% if next_b %}
        <a href="{{ url_for('briefings.detail', briefing_id=next_b.id) }}"
           class="text-sm text-gray-500 hover:text-gray-700">
            ë‹¤ìŒ ë¸Œë¦¬í•‘ â†’
        </a>
        {% else %}
        <span></span>
        {% endif %}
    </div>
</div>

<script>
function copyBriefing() {
    const content = document.querySelector('.briefing-content').innerText;
    navigator.clipboard.writeText(content).then(() => {
        alert('ë¸Œë¦¬í•‘ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    });
}
</script>
{% endblock %}
